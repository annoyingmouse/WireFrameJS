// const input = `7,1
// 11,1
// 11,7
// 9,7
// 9,5
// 2,5
// 2,3
// 7,3`;

const input = `97579,50427
97579,51646
97979,51646
97979,52867
98023,52867
98023,54102
98161,54102
98161,55232
97242,55232
97242,56426
97080,56426
97080,57702
97427,57702
97427,58898
97205,58898
97205,60155
97260,60155
97260,61205
96394,61205
96394,62368
96062,62368
96062,63533
95742,63533
95742,64773
95648,64773
95648,65910
95216,65910
95216,67138
95029,67138
95029,68315
94683,68315
94683,69398
94106,69398
94106,70530
93646,70530
93646,71347
92549,71347
92549,72469
92091,72469
92091,73864
92100,73864
92100,74887
91422,74887
91422,75686
90397,75686
90397,76792
89868,76792
89868,77685
89025,77685
89025,78898
88622,78898
88622,79806
87800,79806
87800,80952
87271,80952
87271,81448
85974,81448
85974,82674
85519,82674
85519,83693
84814,83693
84814,84176
83568,84176
83568,84730
82425,84730
82425,85776
81743,85776
81743,86332
80628,86332
80628,87132
79726,87132
79726,88603
79331,88603
79331,89232
78270,89232
78270,89817
77186,89817
77186,90461
76148,90461
76148,90688
74856,90688
74856,91211
73764,91211
73764,92425
73052,92425
73052,92965
71954,92965
71954,93396
70805,93396
70805,93393
69468,93393
69468,93974
68405,93974
68405,95172
67575,95172
67575,95051
66226,95051
66226,95602
65131,95602
65131,95529
63837,95529
63837,96326
62806,96326
62806,96712
61648,96712
61648,97174
60501,97174
60501,97332
59285,97332
59285,97744
58115,97744
58115,97763
56878,97763
56878,97313
55594,97313
55594,98176
54462,98176
54462,97840
53211,97840
53211,97495
51981,97495
51981,98113
50787,98113
50787,98455
49565,98455
49565,98373
48339,98373
48339,97498
47163,97498
47163,97841
45924,97841
45924,97821
44702,97821
44702,97255
43550,97255
43550,97307
42317,97307
42317,96702
41196,96702
41196,96631
39979,96631
39979,96403
38791,96403
38791,95999
37648,95999
37648,95993
36391,95993
36391,95492
35276,95492
35276,95488
33994,95488
33994,94745
32969,94745
32969,94769
31649,94769
31649,93917
30684,93917
30684,93437
29567,93437
29567,92647
28603,92647
28603,92726
27191,92726
27191,92032
26173,92032
26173,91085
25315,91085
25315,90783
24067,90783
24067,90141
23024,90141
23024,88970
22352,88970
22352,88237
21389,88237
21389,87800
20193,87800
20193,86894
19360,86894
19360,85767
18732,85767
18732,85441
17397,85441
17397,84204
16897,84204
16897,83524
15867,83524
15867,83010
14642,83010
14642,81940
14002,81940
14002,80895
13350,80895
13350,80111
12386,80111
12386,78737
12178,78737
12178,77798
11422,77798
11422,76896
10607,76896
10607,76270
9349,76270
9349,75179
8782,75179
8782,74215
8006,74215
8006,72683
8253,72683
8253,71827
7283,71827
7283,70689
6846,70689
6846,69559
6402,69559
6402,68526
5736,68526
5736,67350
5404,67350
5404,66168
5111,66168
5111,65103
4482,65103
4482,64027
3844,64027
3844,62861
3475,62861
3475,61606
3455,61606
3455,60331
3591,60331
3591,59241
2887,59241
2887,57971
3104,57971
3104,56861
2356,56861
2356,55581
2798,55581
2798,54398
2516,54398
2516,53220
2028,53220
2028,52005
1922,52005
1922,50788
1803,50788
1803,50402
94858,50402
94858,48336
1550,48336
1550,47116
1714,47116
1714,45907
1961,45907
1961,44733
2454,44733
2454,43551
2758,43551
2758,42319
2704,42319
2704,41197
3307,41197
3307,39991
3423,39991
3423,38709
3255,38709
3255,37487
3402,37487
3402,36408
4061,36408
4061,35208
4297,35208
4297,33925
4315,33925
4315,32874
5003,32874
5003,31659
5255,31659
5255,30627
5951,30627
5951,29630
6696,29630
6696,28253
6656,28253
6656,27208
7306,27208
7306,26244
8091,26244
8091,25284
8864,25284
8864,24359
9673,24359
9673,22976
9787,22976
9787,22103
10677,22103
10677,20954
11180,20954
11180,20443
12515,20443
12515,19428
13186,19428
13186,18467
13928,18467
13928,17564
14740,17564
14740,16553
15440,16553
15440,15957
16562,15957
16562,14568
16920,14568
16920,13868
17941,13868
17941,12967
18781,12967
18781,12761
20188,12761
20188,11814
20986,11814
20986,11013
21906,11013
21906,10663
23142,10663
23142,9433
23783,9433
23783,9278
25123,9278
25123,8283
25944,8283
25944,8224
27301,8224
27301,7387
28225,7387
28225,6462
29126,6462
29126,6614
30535,6614
30535,5415
31339,5415
31339,5318
32615,5318
32615,5290
33896,5290
33896,4257
34821,4257
34821,3729
35937,3729
35937,3574
37165,3574
37165,3733
38462,3733
38462,3604
39671,3604
39671,2553
40692,2553
40692,2451
41917,2451
41917,2763
43197,2763
43197,2595
44394,2595
44394,1722
45528,1722
45528,2052
46781,2052
46781,2214
48006,2214
48006,2488
49222,2488
49222,2038
50430,2038
50430,1602
51661,1602
51661,1595
52890,1595
52890,1870
54100,1870
54100,1936
55323,1936
55323,2069
56542,2069
56542,2882
57651,2882
57651,3036
58853,3036
58853,2627
60179,2627
60179,3255
61290,3255
61290,3400
62512,3400
62512,3608
63726,3608
63726,4293
64792,4293
64792,4508
66006,4508
66006,4963
67141,4963
67141,5897
68077,5897
68077,6345
69199,6345
69199,6334
70539,6334
70539,7329
71408,7329
71408,7280
72805,7280
72805,7860
73886,7860
73886,8519
74922,8519
74922,9197
75944,9197
75944,9903
76944,9903
76944,10616
77940,10616
77940,11872
78527,11872
78527,12550
79529,12550
79529,13224
80540,13224
80540,14072
81407,14072
81407,14535
82624,14535
82624,15554
83336,15554
83336,16631
83972,16631
83972,17288
85036,17288
85036,17904
86171,17904
86171,19140
86606,19140
86606,20233
87182,20233
87182,20832
88388,20832
88388,21676
89306,21676
89306,23145
89330,23145
89330,24210
89906,24210
89906,25210
90578,25210
90578,25799
91967,25799
91967,27205
91951,27205
91951,28107
92843,28107
92843,29457
92847,29457
92847,30180
94175,30180
94175,31423
94384,31423
94384,32436
95140,32436
95140,33715
95211,33715
95211,34936
95396,34936
95396,36157
95545,36157
95545,37286
95987,37286
95987,38412
96468,38412
96468,39486
97225,39486
97225,40671
97556,40671
97556,41987
97137,41987
97137,43184
97324,43184
97324,44339
97865,44339
97865,45573
97788,45573
97788,46796
97718,46796
97718,47993
98085,47993
98085,49221
97590,49221
97590,50427`;

(() => {
  /**
   * Calculates the total number of integer points (lattice points)
   * within and on the boundary of an axis-aligned rectangle.
   *
   * @param {number[]} p1 - The first coordinate array [x1, y1] (integer coordinates).
   * @param {number[]} p2 - The second coordinate array [x2, y2] (integer coordinates).
   * @returns {number} The total count of integer points.
   */
  const countIntegerPoints = (p1, p2) => {
    const [x1, y1] = p1;
    const [x2, y2] = p2;

    // The number of points on the X-axis is the distance plus 1
    const xPoints = Math.abs(x2 - x1) + 1;

    // The number of points on the Y-axis is the distance plus 1
    const yPoints = Math.abs(y2 - y1) + 1;

    // Total points is the product of points on each axis
    return xPoints * yPoints;
  };


  const isInsideRect = (r1, r2, p) =>
    p[0] > r1[0] && p[0] < r2[0] && p[1] > r1[1] && p[1] < r2[1];

  const checkIntersect = (r1, r2, l1, l2) => {
    const minr = [Math.min(r1[0], r2[0]), Math.min(r1[1], r2[1])];
    const maxr = [Math.max(r1[0], r2[0]), Math.max(r1[1], r2[1])];
    const minl = [Math.min(l1[0], l2[0]), Math.min(l1[1], l2[1])];
    const maxl = [Math.max(l1[0], l2[0]), Math.max(l1[1], l2[1])];
    const l1i = isInsideRect(minr, maxr, l1);
    const l2i = isInsideRect(minr, maxr, l2);
    let y, x;
    if (l1i || l2i) return true;
    if (minl[0] === maxl[0])
      return (
        (y = minl[0]),
        y > minr[0] && y < maxr[0] && minl[1] <= minr[1] && maxl[1] >= maxr[1]
      );
    if (minl[1] === maxl[1])
      return (
        (x = minl[1]),
        x > minr[1] && x < maxr[1] && minl[0] <= minr[0] && maxl[0] >= maxr[0]
      );
    return false;
  };

  let runningTotal1 = 0;
  let runningTotal2 = 0;
  const coords = input
    .split("\n")
    .map((x) => x.split(",").map((y) => parseInt(y)));
  for (const coord of coords) {
    for (const c of coords) {
      const area = countIntegerPoints(coord, c);
      if (area > runningTotal1) {
        runningTotal1 = area;
      }
    }
  }
  for (const coord of coords) {
    for (const c of coords) {
      const area = countIntegerPoints(coord, c);
      if (area > runningTotal2) {
        let intersect = false;
        for (let k = 0; k < coords.length && !intersect; k++) {
          intersect = checkIntersect(
            coord,
            c,
            coords[k],
            coords[(k + 1) % coords.length],
          );
        }
        if (!intersect) {
          runningTotal2 = area;
        }
      }
    }
  }

  console.log(`Part 1: ${runningTotal1}`);
  console.log(`Part 2: ${runningTotal2}`);
})();
